<% include partials/cabecalho %>
<h1 align="center">{{ titulo }}</h1>
<div class="container table-responsive-md">
    <table border="1" class="table   table-borderless table-dark table-striped table-bordered table-hover">
    <thead class="thead-dark">
        <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Preço</th>
            <th v-if="usuario == 'admin'">Ações</th>           
        </tr>
    </thead>
    <tbody>
    
<style>
.mesmo-tamanho{
    width: 100%;                           
}                                                           
</style>
        <tr v-for="pizza in pizzas">
            <td>{{ pizza.nome }}</td>
            <td>{{ pizza.descricao }}</td>
            <td>R$ {{ pizza.preco.$numberDecimal }}</td> 
            <div class="row">            
                <td v-if="usuario == 'admin'">
                    <div class="rol">                
                        <button class="btn btn-xs btn-primary mesmo-tamanho" href="#/" v-on:click="altera_process(contato._id)">Atualiza</button>&nbsp;&nbsp;&nbsp;&nbsp;
                    </div>                        
                    <div class="rol">             
                        <button class="btn btn-xs btn-danger mesmo-tamanho" href="#/" v-on:click="deleta(contato._id)">Deleta</button>
                    </div>                        
                </td>
            <div>
        </tr>
    </tbody>
</table>
</div>

<script>
	var app = new Vue({
	  el: '#pizzaria',
	  data: {
          pizzas: [],
		  titulo: 'Cardápio de Pizzas',
          usuario: '',
          random: Math.floor(Math.random() * 10)
	  },
	  methods:{
	  },
	  mounted:() => {
	  	axios.get('/usuario')
	    .then((response) => app.usuario = response.data)
        .catch((error) => console.log(error));

        axios.get('/pizzas')       
		.then((response) => app.pizzas = response.data)
		.catch((error) => console.log(error));
	 }
  })
 </script>

<% include partials/rodape %>
