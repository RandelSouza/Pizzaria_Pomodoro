<% include partials/cabecalho %>

<h1 align="center">{{ titulo }}</h1>
<div class="container table-responsive-md ">
    <table border="1" class=" table-fixed table text-center  table-dark table-striped table-bordered table-hover">
    <thead class="thead-dark">
        <tr>
            <th scope="col">Nome</th>
            <th scope="col">Descrição</th>
            <th scope="col">Preço</th>
            <th scope="col" v-if="usuario == 'admin'">Ações</th>           
        </tr>
    </thead>
    <tbody >
        <tr v-for="pizza in pizzas">
            <td width="20%">{{ pizza.nome }}</td>
            <td width="40%">{{ pizza.descricao }}</td>
            <td width="20%">R$ {{ pizza.preco.$numberDecimal }}</td> 
                               
            <td width="20%" v-if="usuario == 'admin'">
                <div class="row" ALIGN="center"> 
                    <div class="col">
                        <!-- a style="width: 100%;" class="btn btn-xs btn-primary mesmo-tamanho" href="#/" v-on:click="altera_process(contato._id)">Atualizar</a-->                                       
                            <!-- Button trigger modal -->
                        <button type="button" class="btn btn-primary mesmo-tamanh" data-toggle="modal" v-bind:data-target="`#exampleModal` + pizza._id">
                        Atualizar
                        </button>
                    </div>           
                    <div class="col" style="float: left;">             
                        <a style="width: 100%;" class="btn btn-xs btn-danger mesmo-tamanho" href="#/" v-on:click="deleta(contato._id)">Deletar</a>
                    </div>                    
                </div>
                
                <% include partials/modal_atualizar %>
            </td>                        
        </tr>
    </tbody>
</table>
</div>

<script>
    // Criar metodo para atualizar os dados modificados
	var app = new Vue({
	  el: '#pizzaria',
	  data: {
          pizzas: [],
		  titulo: 'Cardápio de Pizzas',
          usuario: '',
          random: Math.floor(Math.random() * 10)
	  },
	  methods:{
	  },
	  mounted:() => {
	  	axios.get('/usuario')
	    .then((response) => app.usuario = response.data)
        .catch((error) => console.log(error));

        axios.get('/pizzas')       
		.then((response) => app.pizzas = response.data)
		.catch((error) => console.log(error));
	 }
  })

 </script>

<% include partials/rodape %>
